{
  "master": {
    "tasks": [
      {
        "id": 61,
        "title": "Review and polish Eclair UI for launch",
        "description": "Check for rough edges, verify interactions, ensure visual consistency",
        "details": "## Deliverable: Eclair UI polished and launch-ready\n\n### Context\nPRD Phase 9 (docs/project/PRD/active/PRD-phase-9-launch.md), Milestone 7, Deliverables D7.1-D7.4.\n\nReview Eclair visualizer for any rough edges, broken interactions, or visual inconsistencies before launch.\n\n### Key Decisions and Principles\n- No obvious bugs or broken features\n- Follows brand guidelines\n- Works on common screen sizes\n\n### Delivers\nEclair ready for public use.\n\n### Acceptance Criteria\n- Given demo URL pre-fill When Load clicked Then demo loads correctly\n- Given visualization When viewed Then no layout issues or broken styling\n- Given browser console When app used Then no errors logged\n- Given domain filtering When used Then filters work correctly\n- Given node selection When clicked Then selection highlights correctly\n- Given zoom/pan When used Then navigation works smoothly\n- Given brand guidelines When compared Then colors and typography match\n- Given different screen sizes When tested Then layout adapts reasonably\n\n### Dependencies\n- Task 57 (demo URL pre-fill configured)\n\n### Related Code\n- apps/eclair/src/\n- docs/brand/ — brand guidelines for comparison\n\n### Verification\n- nx serve eclair\n- Test all interactions manually\n- Check browser console for errors\n- Compare against brand guidelines\n- Test on different viewport sizes",
        "testStrategy": "",
        "status": "done",
        "dependencies": [
          "57"
        ],
        "priority": "medium",
        "subtasks": [],
        "updatedAt": "2025-12-31T18:36:04.801Z"
      },
      {
        "id": 62,
        "title": "Refactor CI to tag-triggered npm publish",
        "description": "Change release workflow so npm publish only happens after git push succeeds. Use tag-triggered workflow instead of publishing in the same job as version bump.",
        "details": "",
        "testStrategy": "",
        "status": "pending",
        "dependencies": [],
        "priority": "medium",
        "subtasks": []
      },
      {
        "id": 63,
        "title": "Add --signature flags to CLI enrich command",
        "description": "Add --parameter and --return-type flags to enrich command for DomainOp components",
        "details": "## Deliverable: CLI enrich command supports method signatures\n\n### Context\nDuring extraction workflow testing, we found that the schema supports `signature` on DomainOp components, the builder supports it, and the UI displays it—but the CLI `enrich` command has no flags to add signatures.\n\nSchema definition (`packages/riviere-schema/src/schema.ts:16-19`):\n```typescript\nexport interface OperationSignature {\n  parameters?: OperationParameter[]\n  returnType?: string\n}\n```\n\nBuilder already supports it (`packages/riviere-builder/src/builder.ts:386`).\n\n### Key Decisions and Principles\n- Parameter format: `--parameter \"name:type\"` or `--parameter \"name:type:description\"`\n- Return type format: `--return-type <type>`\n- Flags are repeatable (like existing `--reads`, `--validates`, etc.)\n- Follow existing patterns in enrich.ts for parsing and validation\n\n### Delivers\nAbility to add method signatures when enriching DomainOp components via CLI.\n\n### Acceptance Criteria\n- Given DomainOp, When `--parameter \"orderId:string\"`, Then signature.parameters includes `{name: \"orderId\", type: \"string\"}`\n- Given DomainOp, When `--parameter \"orderId:string:The order ID\"`, Then signature.parameters includes `{name: \"orderId\", type: \"string\", description: \"The order ID\"}`\n- Given DomainOp, When `--return-type void`, Then signature.returnType is `\"void\"`\n- Given multiple `--parameter` flags, When command run, Then all parameters added to signature.parameters array\n- Given parameter format missing type (just `\"orderId\"`), When command run, Then validation error\n- Given empty parameter name (`\":string\"`), When command run, Then validation error\n\n### Dependencies\n- None (schema and builder already support signatures)\n\n### Related Code\n- `packages/riviere-cli/src/commands/builder/enrich.ts` — add new options and parsing\n- `packages/riviere-cli/src/commands/builder/enrich.spec.ts` — add tests\n- `packages/riviere-builder/src/builder-components.spec.ts:222` — example of signature in tests\n\n### Verification\n```bash\nnx test riviere-cli -- --testNamePattern \"enrich.*signature\"\n```",
        "testStrategy": "",
        "status": "pending",
        "dependencies": [],
        "priority": "medium",
        "subtasks": []
      },
      {
        "id": 64,
        "title": "Reject duplicate values in builder enrich operations",
        "description": "Prevent duplicate entries when enriching components with state changes, business rules, and behavior",
        "details": "## Deliverable: Builder library rejects duplicate enrichment values\n\n### Context\nThe enrich command is intentionally additive (documented in step-5-enrich.md and CLI reference). However, when the same value is added twice, duplicates accumulate:\n\n```json\n\"stateChanges\": [\n  { \"from\": \"Draft\", \"to\": \"Placed\" },\n  { \"from\": \"Draft\", \"to\": \"Placed\" }  // duplicate\n]\n```\n\nThe builder library should silently skip values that already exist.\n\n### Key Decisions and Principles\n- Skip duplicates silently (no error, no warning) - additive semantics remain\n- Compare by value equality, not reference\n- Apply to all enrichment arrays: stateChanges, businessRules, behavior.reads/validates/modifies/emits\n\n### Delivers\nRunning `enrich` multiple times with the same values produces no duplicates.\n\n### Acceptance Criteria\n- Given component with stateChange Draft:Placed, When enrich called with Draft:Placed again, Then stateChanges array still has only one entry\n- Given component with businessRule \"X\", When enrich called with \"X\" again, Then businessRules array still has only one entry\n- Given component with reads \"this.state\", When enrich called with \"this.state\" again, Then behavior.reads still has only one entry\n- Given component with no enrichment, When enrich called with values, Then values are added normally\n- Given component with some values, When enrich called with mix of existing and new, Then only new values are added\n\n### Dependencies\n- None\n\n### Related Code\n- `packages/riviere-builder/src/builder.ts` — enrich method, around line 386\n- `packages/riviere-builder/src/builder.spec.ts` — add tests for duplicate rejection\n\n### Verification\n```bash\nnx test riviere-builder -- --testNamePattern \"enrich.*duplicate\"\n```",
        "testStrategy": "",
        "status": "pending",
        "dependencies": [],
        "priority": "low",
        "subtasks": []
      },
      {
        "id": 65,
        "title": "Add event schema extraction to CLI and workflow",
        "description": "Extract eventSchema from TypeScript event type definitions during extraction workflow",
        "details": "## Deliverable: Event schemas extracted from code and displayed in Eclair\n\n### Context\nThe Riviere schema supports `eventSchema` on Event components, and Eclair displays it. However:\n1. The CLI has no way to add eventSchema when adding Event components\n2. The extraction workflow doesn't capture event schemas from TypeScript types\n3. The demo app has event types defined but they weren't being extracted\n\nReference graph now has eventSchema populated manually. Need to automate this.\n\nDemo app event example (orders-domain/src/infrastructure/events.ts):\n```typescript\nexport type OrderPlaced = {\n  type: 'OrderPlaced'\n  orderId: string\n  customerId: string\n  items: Array<{ sku: string; quantity: number }>\n  totalAmount: number\n  timestamp: string\n}\n```\n\n### Key Decisions and Principles\n- Add --event-schema flag to add-component for Event type\n- Update extraction workflow step-2 to capture event schemas from TypeScript types\n- Schema format: TypeScript type literal string (e.g., \"{ orderId: string, timestamp: string }\")\n\n### Delivers\n1. CLI supports adding eventSchema when creating Event components\n2. Extraction workflow captures event schemas from code\n3. Demo app extraction produces graphs with event schemas\n\n### Acceptance Criteria\n- Given Event type, When add-component called with --event-schema, Then eventSchema is set on component\n- Given TypeScript event type definition, When step-2 extraction runs, Then eventSchema captured\n- Given demo app, When full extraction runs, Then all 9 events have eventSchema populated\n- Given Eclair, When viewing Event component, Then schema is displayed\n\n### Dependencies\n- None\n\n### Related Code\n- `packages/riviere-cli/src/commands/builder/add-component.ts` — add --event-schema option\n- `packages/riviere-cli/docs/workflow/step-2-*.md` — update extraction instructions\n- `packages/riviere-schema/src/schema.ts:85` — EventComponent.eventSchema\n\n### Verification\n```bash\nnx test riviere-cli -- --testNamePattern \"add-component.*event.*schema\"\n```",
        "testStrategy": "",
        "status": "pending",
        "dependencies": [],
        "priority": "medium",
        "subtasks": []
      },
      {
        "id": 66,
        "title": "Add social media preview cards to eclair and docs apps",
        "description": "Design a branded social preview image (1200x630px) and add Open Graph/Twitter Card meta tags to both apps",
        "details": "## Deliverable: Add social media preview cards to eclair and docs apps\n\n### Context\nWhen links to eclair or docs are shared on social media (Twitter, LinkedIn, Slack), they display as a white box with just the website name. Neither app has Open Graph or Twitter Card meta tags configured.\n\nCurrent state:\n- Eclair: `/apps/eclair/index.html` — only has title, no OG/Twitter tags\n- Docs: `/apps/docs/.vitepress/config.ts` — has title/description, no OG/Twitter tags\n\n### Key Decisions\n- Create ONE dedicated social preview image used across all pages of both apps\n- Image dimensions: 1200x630px (optimal for OG/Twitter)\n- Design must follow brand guidelines in `/docs/brand/`\n\n### Delivers\n1. A branded social preview card image (1200x630px)\n2. Meta tags configured so shared links display rich previews\n\n### Acceptance Criteria\n- Given brand guidelines, When preview image designed, Then follows colors/typography/logo from `/docs/brand/`\n- Given preview image, When dimensions checked, Then is 1200x630px\n- Given eclair link shared on social media, When preview renders, Then shows branded image with title and description\n- Given docs link shared on social media, When preview renders, Then shows same branded image with title and description\n- Given Open Graph validator tool, When URL tested, Then all required tags present (og:title, og:description, og:image, og:url, og:type)\n\n### Dependencies\n- None\n\n### Related Code\n- `/docs/brand/` — brand guidelines (colors, logo, typography)\n- `/apps/eclair/index.html` — add meta tags to <head>\n- `/apps/docs/.vitepress/config.ts` — add to head array\n\n### Verification\n1. Test with https://www.opengraph.xyz/\n2. Test actual share on Twitter/LinkedIn/Slack",
        "testStrategy": "",
        "status": "pending",
        "dependencies": [],
        "priority": "low",
        "subtasks": []
      },
      {
        "id": 67,
        "title": "Fix nav bar and sidebar alignment issues on docs site",
        "description": "Top nav border and sidebar border don't align; green artifacts visible at top corners",
        "details": "## Deliverable: Fix visual alignment issues on docs site header/sidebar\n\n### Context\nOn the docs site (living-architecture.dev), there are visual alignment issues:\n1. The horizontal line under the top nav bar doesn't align with the top of the left sidebar border\n2. Small green artifacts/lines visible at the top corners of the page (accent color leaking)\n\nScreenshot provided by user shows the issue on `/get-started/` page.\n\n### Key Decisions\n- This is a VitePress theme customization issue\n- Fix should be in custom CSS overrides\n\n### Delivers\nClean, aligned borders with no color artifacts\n\n### Acceptance Criteria\n- Given docs site loaded, When viewing header area, Then nav bar bottom border aligns with sidebar top\n- Given docs site loaded, When viewing top corners, Then no green artifacts visible\n- Given different viewport widths, When resizing, Then alignment remains consistent\n\n### Dependencies\n- None\n\n### Related Code\n- `/apps/docs/.vitepress/theme/` — custom theme overrides\n- `/apps/docs/.vitepress/config.ts` — VitePress config\n\n### Verification\n1. Visual inspection on living-architecture.dev after deploy\n2. Test at multiple viewport widths",
        "testStrategy": "",
        "status": "pending",
        "dependencies": [],
        "priority": "low",
        "subtasks": []
      },
      {
        "id": 68,
        "title": "Set up Renovate and Knip",
        "description": "Configure Renovate for automated dependency updates and Knip for detecting unused files, dependencies, and exports",
        "details": "## Deliverable\nAutomated dependency updates and dead code detection for the monorepo.\n\n### Context\nThe monorepo currently lacks:\n- Automated dependency update tooling (dependencies go stale)\n- Unused code detection (dead code accumulates)\n\nRenovate automates dependency PRs. Knip finds unused files, dependencies, and exports.\n\n### Delivers\n1. Renovate configuration (renovate.json) at repo root - use GitHub Renovate App\n2. Knip configuration (knip.json or knip.ts) at repo root\n3. Knip integrated into verify gate\n\n### Acceptance Criteria\n- Given Renovate is configured, When a dependency has updates, Then Renovate creates a PR automatically\n- Given Knip is configured, When unused exports/dependencies exist, Then Knip reports them\n- Given Knip is in CI, When verify runs, Then unused code violations fail the build\n\n### Related Code\n- /package.json\n- /apps/*/package.json\n- /packages/*/package.json\n\n### Verification\n1. Run npx knip and verify it executes without config errors\n2. Verify Renovate dashboard shows repo is enabled",
        "testStrategy": "",
        "status": "pending",
        "dependencies": [],
        "priority": "medium",
        "subtasks": []
      },
      {
        "id": 69,
        "title": "Analyze and fix SonarCloud issues",
        "description": "Review existing SonarCloud issues and fix them to establish a clean baseline",
        "details": "## Context\nSonarCloud integration was added to CI. Before enforcing quality gates on new code, we should fix existing issues to establish a clean baseline.\n\n## Acceptance Criteria\n- [ ] Query SonarCloud for all current issues on main branch\n- [ ] Fix all CRITICAL and BLOCKER severity issues\n- [ ] Fix all MAJOR severity issues\n- [ ] Review and address any security hotspots\n- [ ] Verify quality gate passes on the PR\n\n## Technical Notes\nQuery issues:\n```bash\ncurl -s \"https://sonarcloud.io/api/issues/search?projectKey=NTCoding_living-architecture&severities=CRITICAL,BLOCKER,MAJOR\" | jq '.issues[] | {rule: .rule, message: .message, file: .component, line: .line}'\n```\n\nQuery security hotspots:\n```bash\ncurl -s \"https://sonarcloud.io/api/hotspots/search?projectKey=NTCoding_living-architecture\" | jq '.hotspots[] | {message: .message, file: .component, line: .line}'\n```\n\n## Test Strategy\n- All existing tests must pass\n- SonarCloud quality gate must pass on PR",
        "testStrategy": "",
        "status": "in-progress",
        "dependencies": [],
        "priority": "high",
        "subtasks": [],
        "updatedAt": "2026-01-01T18:41:50.418Z"
      },
      {
        "id": 70,
        "title": "Fix search box redirect on full graph page",
        "description": "Search box causes page flicker and redirects to demo",
        "details": "## Deliverable: Search box on full graph page works without redirect\n\n### Context\nBug reported: The search box on the full graph page makes the page flicker and then redirects to the demo. This is a UX issue that prevents users from searching when they have their own graph loaded.\n\n### Key Decisions and Principles\n- Do not change the GraphSearch component API\n- Investigate event handling and any navigation side effects\n\n### Delivers\nUsers can type in the search box on the full graph page without being redirected to demo mode.\n\n### Acceptance Criteria\n- Given user has a custom graph loaded When user types in the search box on /full-graph Then the search filters nodes without redirecting\n- Given user is on /full-graph with custom graph When user focuses on search box Then page does not flicker\n- Given user presses \"/\" shortcut to focus search When on full graph page Then search focuses without navigation side effects\n\n### Dependencies\n- None\n\n### Related Code\n- `apps/eclair/src/features/full-graph/FullGraphPage.tsx` — main page using GraphSearch\n- `apps/eclair/src/features/full-graph/components/GraphSearch/GraphSearch.tsx` — search component\n- `apps/eclair/src/contexts/GraphContext.tsx` — demo mode detection logic\n\n### Verification\n- Run `nx test eclair` to ensure no regressions\n- Manual test: Load custom graph, type in search box, verify no redirect",
        "testStrategy": "",
        "status": "pending",
        "dependencies": [],
        "priority": "high",
        "subtasks": []
      },
      {
        "id": 71,
        "title": "Move business rules from entity level to action level",
        "description": "Business rules are stacked vertically at entity top; they belong to actions instead",
        "details": "## Deliverable: Business rules displayed under their respective actions, not at entity level\n\n### Context\nBug reported: When an entity has many business rules, they're all listed at the top of the entity accordion, causing excessive vertical stacking. Business rules semantically belong to actions (methods), not to the entity itself.\n\nCurrently EntityAccordion shows:\n1. State Machine (correct placement)\n2. Business Rules (WRONG - should not be at entity level)\n3. Methods (each method also shows \"Governed by\" with ALL entity rules)\n\n### Key Decisions and Principles\n- Business rules should only appear under the method/action they govern\n- If a rule applies to multiple methods, show it under each relevant method\n- If Riviere schema doesn't associate rules with specific methods, rules should appear under ALL methods (current \"Governed by\" behavior) but NOT at entity top level\n\n### Delivers\nEntity accordion no longer shows business rules at the entity level. Rules appear only within method cards where they apply.\n\n### Acceptance Criteria\n- Given an entity with business rules When viewing entity accordion expanded Then business rules section is NOT shown at entity top level\n- Given an entity with business rules When viewing a method card expanded Then business rules appear under \"Governed by\" section\n- Given an entity with no business rules When viewing entity accordion Then no business rules section appears anywhere\n\n### Dependencies\n- None\n\n### Related Code\n- `apps/eclair/src/features/domains/components/EntityAccordion/EntityAccordion.tsx:124-139` — business rules at entity level (REMOVE)\n- `apps/eclair/src/features/domains/components/EntityAccordion/EntityAccordion.tsx:320-349` — MethodCardContent shows \"Governed by\"\n\n### Verification\n- Run `nx test eclair` to ensure no regressions\n- Manual test: View entity with business rules, verify rules only appear in method cards",
        "testStrategy": "",
        "status": "pending",
        "dependencies": [],
        "priority": "high",
        "subtasks": []
      },
      {
        "id": 72,
        "title": "Fix method name click flicker on entity page",
        "description": "Clicking on method name flickers and doesn't show contents",
        "details": "## Deliverable: Method cards expand reliably when clicked\n\n### Context\nBug reported: On the entity page, clicking on a method name in the EntityAccordion causes the UI to flicker and doesn't show the method contents.\n\nThe MethodCard component uses useState for isExpanded state and toggles on click. Something is causing the state to reset or the click to be handled incorrectly.\n\n### Key Decisions and Principles\n- Investigate if parent re-renders are resetting child state\n- Check for event propagation issues (stopPropagation is already used in some places)\n- Ensure click handler is on the correct element\n\n### Delivers\nClicking a method name in the entity accordion reliably expands to show method details.\n\n### Acceptance Criteria\n- Given an entity accordion is expanded When user clicks a method name Then the method card expands to show behavior details\n- Given a method card is expanded When user clicks the method name again Then the method card collapses\n- Given multiple methods in an entity When user clicks different methods Then only the clicked method toggles (no flicker on others)\n\n### Dependencies\n- None\n\n### Related Code\n- `apps/eclair/src/features/domains/components/EntityAccordion/EntityAccordion.tsx:177-188` — MethodCard component with expansion logic\n- `apps/eclair/src/features/domains/components/EntityAccordion/EntityAccordion.tsx:215-227` — MethodCardButton with onClick handler\n\n### Verification\n- Run `nx test eclair` to ensure no regressions\n- Manual test: Open entity, click method name, verify it expands without flicker",
        "testStrategy": "",
        "status": "pending",
        "dependencies": [],
        "priority": "high",
        "subtasks": []
      },
      {
        "id": 73,
        "title": "Fix tooltip for truncated text in flows graph view",
        "description": "On flows page graph view, truncated text tooltips don't work",
        "details": "## Deliverable: Tooltips show full text for truncated labels in flows graph view\n\n### Context\nBug reported: On the flows page when selecting \"graph\" view, sometimes the text is truncated but the tooltip doesn't work, so users can't see the actual full name.\n\nThe FlowGraphView uses the ForceGraph component which has its own tooltip system via GraphTooltip. The issue may be that truncated node labels don't trigger tooltip on hover, or the tooltip content doesn't include the full name.\n\n### Key Decisions and Principles\n- Use native HTML title attribute as fallback if custom tooltip is complex\n- Ensure tooltip triggers on truncated text hover\n- Full node name must be visible somehow when text is truncated\n\n### Delivers\nUsers can see the full name of any node in the flows graph view when hovering over truncated text.\n\n### Acceptance Criteria\n- Given a flow graph with long node names When node label is truncated Then hovering shows full name in tooltip\n- Given flow graph tooltip When user hovers over node Then tooltip appears without delay issues\n- Given truncated node label When user hovers Then cursor indicates more info is available\n\n### Dependencies\n- None\n\n### Related Code\n- `apps/eclair/src/features/flows/components/FlowTrace/FlowGraphView.tsx` — flow graph view using ForceGraph\n- `apps/eclair/src/features/full-graph/components/ForceGraph/ForceGraph.tsx` — ForceGraph with tooltip handling\n- `apps/eclair/src/features/full-graph/components/GraphTooltip/GraphTooltip.tsx` — tooltip component\n\n### Verification\n- Run `nx test eclair` to ensure no regressions\n- Manual test: Open flow with long node names, verify tooltip shows full text on hover",
        "testStrategy": "",
        "status": "pending",
        "dependencies": [],
        "priority": "medium",
        "subtasks": []
      },
      {
        "id": 74,
        "title": "Increase text visibility in domain map circles",
        "description": "Domain map circles truncate text too aggressively, e.g. 'employee ma' for 'employee management api'",
        "details": "## Deliverable: Domain map circles show more readable text with better truncation\n\n### Context\nBug reported: On the domain map, domain circles don't show enough text. For example, \"employee management api\" is truncated at \"employee ma\" - way too aggressive. For services with the same prefix (e.g., \"employee management api\" and \"employee portal\"), users can't tell the difference.\n\nCurrent implementation:\n- DomainNode.tsx:14 hardcodes circle size = 80px\n- DomainNode.tsx:17 truncates to maxLength=12 characters\n- This aggressive truncation makes similar service names indistinguishable\n\n### Key Decisions and Principles\n- Increase circle size and/or truncation length\n- Consider multi-line text for long names\n- Ensure tooltip shows full name (already has title attribute on line 38)\n- Balance readability with layout density\n\n### Delivers\nDomain map circles display more text, making domains distinguishable at a glance.\n\n### Acceptance Criteria\n- Given domain name \"employee management api\" When displayed on domain map Then at least \"employee manag...\" is visible (not just \"employee ma\")\n- Given two domains with similar prefix When both visible on domain map Then users can distinguish them visually\n- Given long domain name When hovering over circle Then full name appears in tooltip\n- Given domain map with many domains When all visible Then layout remains usable (circles don't overlap excessively)\n\n### Dependencies\n- None\n\n### Related Code\n- `apps/eclair/src/features/domain-map/components/DomainNode/DomainNode.tsx:14` — size = 80 hardcoded\n- `apps/eclair/src/features/domain-map/components/DomainNode/DomainNode.tsx:17` — truncateLabel with maxLength=12\n- `apps/eclair/src/features/domain-map/components/DomainNode/DomainNode.tsx:38` — title attribute for tooltip\n\n### Verification\n- Run `nx test eclair` to ensure no regressions\n- Manual test: Load graph with long domain names, verify visibility and distinguishability",
        "testStrategy": "",
        "status": "pending",
        "dependencies": [],
        "priority": "medium",
        "subtasks": []
      },
      {
        "id": 75,
        "title": "Clear demo mode from URL after uploading custom graph",
        "description": "Demo mode persists in URL after upload graph, causing confusion and redirect issues",
        "details": "## Deliverable: URL correctly reflects non-demo state after uploading a custom graph\n\n### Context\nBug reported: When in demo mode, if user goes to \"upload graph\" and uploads a graph, it still says \"demo\" in the URL. This looks wrong and the app will redirect to the demo when users are not looking at a demo graph.\n\nThe issue is in GraphContext.tsx - demo mode is determined by URL param ?demo=true, but uploading a graph doesn't clear this param.\n\n### Key Decisions and Principles\n- When user uploads a custom graph, clear the demo=true URL param\n- Ensure navigation state reflects actual graph source\n- Don't break browser back/forward navigation\n\n### Delivers\nAfter uploading a custom graph, the URL no longer contains demo=true and the app behaves as if viewing a user-provided graph.\n\n### Acceptance Criteria\n- Given user is on ?demo=true When user uploads a custom graph via upload page Then ?demo=true is removed from URL\n- Given demo param was cleared When user navigates to other pages Then demo param stays cleared\n- Given user uploaded graph When refreshing page Then app loads the uploaded graph (not demo)\n- Given user is NOT in demo mode initially When uploading graph Then URL remains without demo param\n\n### Dependencies\n- None\n\n### Related Code\n- `apps/eclair/src/contexts/GraphContext.tsx:34-38` — getIsDemoMode() checks URL param\n- Upload page component (needs identification) — where setGraph is called after upload\n\n### Verification\n- Run `nx test eclair` to ensure no regressions\n- Manual test: Go to demo mode, upload custom graph, verify URL clears demo param",
        "testStrategy": "",
        "status": "pending",
        "dependencies": [],
        "priority": "high",
        "subtasks": []
      },
      {
        "id": 76,
        "title": "Show handled event name on event handler in flows page",
        "description": "On flows page, event handlers don't show which event they handle",
        "details": "## Deliverable: Event handlers on flows page display the event they handle\n\n### Context\nBug reported: On the flows page, an \"event handler\" doesn't show which event it handles. Users need to know what event triggers a handler to understand the system flow.\n\nEvent handlers are entry points into flows. When displayed in the flows page, the event name should be visible alongside the handler name.\n\n### Key Decisions and Principles\n- Display event name prominently (not hidden in tooltip)\n- Format: either \"HandlerName (handles: EventName)\" or similar clear pattern\n- Check if event info is available in the flow data from extractFlows\n\n### Delivers\nUsers can see which event triggers each event handler on the flows page.\n\n### Acceptance Criteria\n- Given a flow with an event handler entry point When viewing flows page Then the event name is displayed alongside handler name\n- Given multiple event handlers When viewing flows list Then each handler shows its respective event\n- Given event handler without event info When displayed Then graceful fallback (don't crash, show handler name only)\n\n### Dependencies\n- None\n\n### Related Code\n- `apps/eclair/src/features/flows/FlowsPage.tsx` — flows list rendering\n- `apps/eclair/src/features/flows/components/FlowCard/FlowCard.tsx` — individual flow card display\n- `apps/eclair/src/features/flows/extractFlows.ts` — flow extraction logic (check if event info available)\n\n### Verification\n- Run `nx test eclair` to ensure no regressions\n- Manual test: Load graph with event handlers, verify event names are visible",
        "testStrategy": "",
        "status": "pending",
        "dependencies": [],
        "priority": "medium",
        "subtasks": []
      },
      {
        "id": 77,
        "title": "Improve graph edge styling with type differentiation and reduced prominence",
        "description": "Graph edges are too thick, clash with green nodes, and don't indicate if connection is API or event",
        "details": "## Deliverable: Graph edges are visually refined with type indication and better aesthetics\n\n### Context\nBug reported: On the full graph and the \"graph\" section on the flows page, we don't know what the lines mean - is it an API call or an event? The lines are quite thick and are too prominent. They also clash with the green nodes.\n\nIssues to address:\n1. Edge type unclear (API vs event vs other)\n2. Stroke width too prominent\n3. Color clashes with green nodes\n\n### Key Decisions and Principles\n- Differentiate edge types visually (color, dash pattern, or labels)\n- Reduce stroke width for less visual clutter\n- Choose colors that complement rather than clash with node colors\n- Consider using the existing edge type data from Riviere links\n\n### Delivers\nGraph edges are thinner, visually indicate their type (API/event), and don't clash with node colors.\n\n### Acceptance Criteria\n- Given an API connection edge When viewing graph Then edge is visually distinct from event edges\n- Given an event connection edge When viewing graph Then edge is visually distinct from API edges\n- Given any edge When viewing graph Then stroke width is reduced from current value\n- Given edges near green nodes When viewing graph Then edge colors don't clash with node colors\n- Given edge type When hovering Then tooltip indicates edge type\n\n### Dependencies\n- None\n\n### Related Code\n- `apps/eclair/src/features/full-graph/components/ForceGraph/ForceGraph.tsx` — D3-based edge rendering\n- `apps/eclair/src/features/domain-map/components/DomainEdge/DomainEdge.tsx` — domain map edges (strokeWidth: 2)\n- `apps/eclair/src/features/full-graph/graphFocusing/` — edge coloring utilities\n\n### Verification\n- Run `nx test eclair` to ensure no regressions\n- Manual test: View full graph, verify edges are distinguishable and less prominent",
        "testStrategy": "",
        "status": "pending",
        "dependencies": [],
        "priority": "medium",
        "subtasks": []
      },
      {
        "id": 78,
        "title": "Unify entities and events page layout",
        "description": "Events and entities pages have different layouts for overview and search sections",
        "details": "## Deliverable: Events and entities pages share consistent layout patterns\n\n### Context\nBug reported: Events and entities pages should have similar layout. Currently the overview and search are different between the two pages, creating inconsistent UX.\n\n### Key Decisions and Principles\n- Determine which page has the preferred layout (likely entities page)\n- Apply consistent header, search, and filter patterns across both\n- Maintain any page-specific functionality while unifying visual structure\n\n### Delivers\nEvents and entities pages have consistent layout for overview section and search/filter controls.\n\n### Acceptance Criteria\n- Given events page and entities page When comparing layouts Then header structure is identical\n- Given events page and entities page When comparing search Then search input styling and position is identical\n- Given events page When viewing Then page matches entities page layout pattern\n\n### Dependencies\n- None\n\n### Related Code\n- `apps/eclair/src/features/entities/EntitiesPage.tsx` — entities page layout\n- `apps/eclair/src/features/events/` — events page (needs identification)\n\n### Verification\n- Run `nx test eclair` to ensure no regressions\n- Visual comparison: Both pages should look consistent",
        "testStrategy": "",
        "status": "pending",
        "dependencies": [],
        "priority": "medium",
        "subtasks": []
      },
      {
        "id": 79,
        "title": "Add links from event handlers to handler details on events page",
        "description": "Event handlers listed on events page don't link anywhere, can't see what handlers do",
        "details": "## Deliverable: Event handlers on events page are clickable links to handler details\n\n### Context\nBug reported: On the events page, the list of event handlers for an event does not link anywhere so users can't see what the handlers actually do. Users need to navigate from an event to its handlers to understand the system flow.\n\n### Key Decisions and Principles\n- Link should navigate to appropriate detail view (flows page with handler, or entity containing handler)\n- Consider whether to link to flows page filtered by handler, or to a handler-specific view\n- If handler doesn't have a detail page, link to graph view focused on that node\n\n### Delivers\nEach event handler listed on the events page is a clickable link that navigates to handler details.\n\n### Acceptance Criteria\n- Given an event with handlers When viewing event details Then each handler name is a clickable link\n- Given handler link When clicked Then navigates to handler details (flow, entity, or graph view)\n- Given handler without detail page When clicked Then navigates to full graph focused on handler node\n\n### Dependencies\n- None\n\n### Related Code\n- Events page component (needs identification) — where handlers are listed\n- Routing logic for navigation targets\n\n### Verification\n- Run `nx test eclair` to ensure no regressions\n- Manual test: Click event handler link, verify navigation works",
        "testStrategy": "",
        "status": "pending",
        "dependencies": [],
        "priority": "medium",
        "subtasks": []
      },
      {
        "id": 80,
        "title": "Fix empty connections section when clicking domain map edge",
        "description": "Domain map sidebar shows '7 connections' but Connections section below is empty",
        "details": "## Deliverable: Domain map edge click shows actual connections in sidebar\n\n### Context\nBug reported: When clicking on a line (edge) on the \"domain map\", the sidebar says for example \"7 connections\", but then the \"Connections\" section below it is empty. The count is displayed but the actual connection details are missing.\n\n### Key Decisions and Principles\n- Investigate if connection data is being passed but not rendered\n- Check if the inspector panel has the correct data binding\n- Ensure connection details (source, target, type) are displayed\n\n### Delivers\nWhen clicking an edge on the domain map, the sidebar displays the connection count AND lists the actual connections below.\n\n### Acceptance Criteria\n- Given domain map with edges When clicking an edge Then sidebar shows correct connection count\n- Given edge clicked on domain map When viewing sidebar Then Connections section lists each connection\n- Given edge with multiple connections When clicking Then all connections are listed with source/target info\n\n### Dependencies\n- None\n\n### Related Code\n- `apps/eclair/src/features/domain-map/DomainMapPage.tsx` — domain map with edge click handling\n- Integration inspector/sidebar component (needs identification)\n\n### Verification\n- Run `nx test eclair` to ensure no regressions\n- Manual test: Click edge on domain map, verify connections list populates",
        "testStrategy": "",
        "status": "pending",
        "dependencies": [],
        "priority": "high",
        "subtasks": []
      }
    ],
    "metadata": {
      "version": "1.0.0",
      "lastModified": "2026-01-01T18:41:50.418Z",
      "taskCount": 9,
      "completedCount": 1,
      "tags": [
        "master"
      ],
      "created": "2026-01-02T14:44:47.668Z",
      "description": "Tasks for master context",
      "updated": "2026-01-02T14:51:48.603Z"
    }
  }
}